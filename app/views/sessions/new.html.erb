<div class="login-container">
  <h2 class="login-title">教員用ログイン</h2>

  <% if flash[:alert] %>
    <p class="login-alert"><%= flash[:alert] %></p>
  <% end %>

  <%= form_with url: login_path, local: true, html: { class: "login-form" } do |f| %>
  <div class="form-group">
    <div class="label-with-icon">
      <%= image_tag "account.svg", alt: "アカウントアイコン", class: "form-icon" %>
      <%= f.label :account_name, "アカウント名", class: "form-label" %>
    </div>

    <%= f.text_field :account_name, class: "form-input" %>
  </div>


  <div class="form-group password-group">
    <div class="label-with-icon">
      <%= image_tag "password.svg", alt: "パスワードアイコン", class: "form-icon" %>
      <%= f.label :password, "パスワード", class: "form-label" %>
    </div>

    <div class="password-wrapper">
      <%= f.password_field :password, class: "form-input", id: "password-field" %>

      <%= image_tag "eye.svg",
          id: "toggle-password",
          class: "toggle-password",
          alt: "パスワード表示切り替え",
          data: { open: asset_path("eye.svg"), close: asset_path("eye-slash.svg") } %>
    </div>
  </div>

    <div class="form-group">
      <%= f.submit "ログイン", class: "form-button" %>
    </div>
  <% end %>

  <hr class="divider">

  <%= button_to "生徒としてログイン", guest_login_path, method: :post, class: "guest-button" %>
</div>

<script>
document.addEventListener("turbo:load", function() {
  const toggle = document.getElementById("toggle-password");
  const password = document.getElementById("password-field");

  if (toggle && password) {
    toggle.addEventListener("click", () => {
      if (password.type === "password") {
        password.type = "text";
        toggle.src = toggle.dataset.open;  //（表示状態）
      } else {
        password.type = "password";
        toggle.src = toggle.dataset.close; //（非表示状態）
      }
    });
  }
});
</script>
